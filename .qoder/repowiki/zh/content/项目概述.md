# 项目概述

<cite>
**本文档引用文件**  
- [README.md](file://README.md)
- [package.json](file://package.json)
- [src/main.ts](file://src/main.ts)
- [src/App.vue](file://src/App.vue)
- [src/views/Home.vue](file://src/views/Home.vue)
- [src/stores/invoice.ts](file://src/stores/invoice.ts)
- [src/composables/useFileParser.ts](file://src/composables/useFileParser.ts)
- [src/utils/fileValidator.ts](file://src/utils/fileValidator.ts)
- [src/utils/invoicePdfParser.ts](file://src/utils/invoicePdfParser.ts)
- [src/utils/xmlParser.ts](file://src/utils/xmlParser.ts)
- [src/utils/nameGenerator.ts](file://src/utils/nameGenerator.ts)
- [src/composables/useFileExport.ts](file://src/composables/useFileExport.ts)
- [src/components/FileUploader.vue](file://src/components/FileUploader.vue)
- [src/components/InvoiceTable.vue](file://src/components/InvoiceTable.vue)
- [vite.config.ts](file://vite.config.ts)
</cite>

## 目录
1. [项目简介](#项目简介)
2. [核心功能模块](#核心功能模块)
3. [目标用户与使用场景](#目标用户与使用场景)
4. [技术架构与实现](#技术架构与实现)
5. [设计理念与差异化优势](#设计理念与差异化优势)
6. [使用流程示例](#使用流程示例)
7. [系统架构图](#系统架构图)

## 项目简介

FinanceTools 是一款专为财务人员设计的本地化发票处理工具，旨在通过自动化手段显著提升财务工作效率。项目基于 Vue 3 和 Vite 构建，采用现代化前端技术栈，提供直观易用的用户界面和高效稳定的处理能力。该工具主要解决财务工作中发票文件命名混乱、信息提取繁琐等痛点问题，支持 PDF 和 XML 格式的批量处理，帮助用户快速完成发票重命名与关键信息解析两大核心任务。

作为一款轻量级桌面应用，FinanceTools 无需连接服务器，所有处理均在本地完成，确保了财务数据的安全性和隐私性。用户只需将发票文件拖拽至指定区域，系统即可自动识别并提取发票类型、购买方名称、金额、税额、价税合计等关键信息，并根据预设规则智能生成标准化文件名。同时，系统支持将解析结果以 Excel 或 JSON 格式导出，便于后续对账、归档和数据分析。

**Section sources**
- [README.md](file://README.md#L1-L41)
- [package.json](file://package.json#L1-L33)

## 核心功能模块

FinanceTools 的核心功能由两大模块构成：**发票重命名**和**发票解析**。这两个模块协同工作，形成完整的发票处理流水线。

### 发票重命名模块

发票重命名模块负责将原始命名混乱的发票文件（如“扫描001.pdf”、“附件2.xml”等）转换为包含关键业务信息的标准化文件名。系统通过解析发票内容，提取购买方名称、金额、发票类型等字段，按照预设的命名规则（如“购方名称_金额”）自动生成新文件名。这不仅极大提升了文件的可读性和可检索性，也为后续的财务归档和审计工作提供了便利。

### 发票解析模块

发票解析模块是系统的核心数据处理引擎。它能够批量处理用户上传的 PDF 和 XML 发票文件，利用文本提取和模式匹配技术，精准识别并提取发票中的结构化信息。对于 PDF 文件，系统使用 `pdfjs-dist` 库进行文本内容提取，并通过正则表达式匹配关键字段；对于 XML 文件，则使用 `fast-xml-parser` 库进行结构化解析。解析结果包括发票号码、发票代码、购买方/销售方名称、开票日期、不含税金额、税额、价税合计、税率等，所有信息均在前端界面中以表格形式清晰展示，支持筛选、编辑和导出。

**Section sources**
- [README.md](file://README.md#L7-L13)
- [src/stores/invoice.ts](file://src/stores/invoice.ts#L1-L256)
- [src/utils/nameGenerator.ts](file://src/utils/nameGenerator.ts#L1-L250)

## 目标用户与使用场景

### 目标用户群体

FinanceTools 的主要目标用户是企业财务部门的工作人员，包括：
- **企业财务人员**：负责日常报销、对账、税务申报等工作的专业财务人员。
- **会计助理**：协助处理大量基础性票据整理和数据录入工作的初级岗位。
- **行政与采购人员**：需要处理供应商发票并提交报销的非财务专业人员。

### 典型使用场景

1. **月度报销处理**：每月初，财务人员收到大量员工提交的电子发票。通过 FinanceTools，可以一次性上传所有文件，系统自动完成解析和重命名，将“发票_张三_20231001.pdf”等模糊文件名转换为“腾讯_754.85.pdf”，极大简化了后续的核对和入账流程。
2. **年度审计准备**：在年度审计前，需要对全年的发票进行归档。FinanceTools 可以快速处理数万份发票文件，生成结构化的数据表，并导出为 Excel 供审计师审查，确保数据的完整性和一致性。
3. **供应商对账**：与供应商对账时，需要核对大量发票信息。FinanceTools 提供的解析结果可以直接与 ERP 系统中的数据进行比对，快速发现差异，提高对账效率。

**Section sources**
- [README.md](file://README.md#L3-L13)
- [src/views/Home.vue](file://src/views/Home.vue#L1-L247)

## 技术架构与实现

FinanceTools 采用现代化的前端技术栈，构建了一个高效、可维护的单页应用（SPA）。

### 前端框架与构建工具

项目基于 **Vue 3** 构建，充分利用了其组合式 API（Composables）带来的代码组织优势，使得业务逻辑（如文件解析、状态管理）可以被清晰地分离和复用。UI 组件库选用 **Naive UI**，提供了丰富且美观的组件，加速了开发进程。项目构建和开发服务器由 **Vite** 驱动，其基于原生 ES 模块的快速热重载（HMR）特性，为开发者提供了极佳的开发体验。

### 状态管理

应用状态使用 **Pinia** 进行集中管理。`invoice.ts` 文件定义了 `useInvoiceStore`，用于存储所有上传的发票文件、解析结果、用户筛选条件和选中状态。这种集中式状态管理确保了数据在不同组件（如文件上传器、数据表格、操作栏）之间的一致性和实时同步。

### 核心功能实现

- **文件解析**：通过 `useFileParser` 组合式函数协调 `pdfParser` 和 `xmlParser` 工具类。`pdfParser` 利用 `pdfjs-dist` 提取 PDF 文本，并通过多层级的正则表达式模式匹配关键字段；`xmlParser` 则使用 `fast-xml-parser` 将 XML 转换为 JavaScript 对象后进行数据提取。
- **文件验证**：`fileValidator.ts` 在文件上传时进行预检查，确保文件格式（PDF/XML）、大小（≤10MB）和数量（≤100个）符合要求。
- **文件导出**：`useFileExport` 组合式函数利用 `JSZip` 库将处理后的文件打包成 ZIP 压缩包，并通过 `file-saver` 触发浏览器下载。

**Section sources**
- [package.json](file://package.json#L1-L33)
- [src/main.ts](file://src/main.ts#L1-L12)
- [src/App.vue](file://src/App.vue#L1-L44)
- [vite.config.ts](file://vite.config.ts#L1-L18)
- [src/composables/useFileParser.ts](file://src/composables/useFileParser.ts#L1-L109)
- [src/utils/fileValidator.ts](file://src/utils/fileValidator.ts#L1-L107)
- [src/composables/useFileExport.ts](file://src/composables/useFileExport.ts#L1-L94)

## 设计理念与差异化优势

### 设计理念

FinanceTools 的设计理念是“**简单、高效、安全**”。
- **简单**：用户界面简洁直观，操作流程符合直觉，无需复杂培训即可上手。
- **高效**：通过批量处理和自动化解析，将原本需要数小时的手动工作缩短至几分钟。
- **安全**：所有数据处理均在用户本地浏览器中完成，不涉及任何网络传输，从根本上杜绝了数据泄露风险。

### 差异化优势

相较于市面上其他财务软件或在线工具，FinanceTools 具有以下显著优势：
1. **本地化处理**：与需要上传文件到云端的 SaaS 工具不同，FinanceTools 完全离线运行，特别适合处理敏感的财务数据。
2. **轻量化与免安装**：作为一个基于浏览器的应用，用户无需安装复杂的客户端软件，下载后即可直接运行。
3. **开源与可定制**：项目采用 MIT 开源协议，用户可以根据自身需求修改命名规则、解析逻辑，甚至贡献代码。
4. **专注核心功能**：不追求大而全，而是专注于解决发票处理这一单一但高频的痛点，做到极致。

**Section sources**
- [README.md](file://README.md#L1-L41)
- [package.json](file://package.json#L35-L37)

## 使用流程示例

1. **启动应用**：运行 `npm run dev` 启动开发服务器，或运行 `npm run build` 后在浏览器中打开 `index.html`。
2. **上传文件**：在首页的拖拽区域点击或拖入 PDF/XML 发票文件。
3. **自动处理**：系统自动验证文件，解析内容，并在后台生成新文件名。
4. **查看结果**：解析完成后，发票信息会显示在下方的数据表格中，用户可查看、编辑（如修正识别错误的购买方名称）或筛选。
5. **导出文件**：点击“导出”按钮，系统将所有成功处理的文件按新名称打包成 ZIP 文件并下载。

**Section sources**
- [src/views/Home.vue](file://src/views/Home.vue#L1-L247)
- [src/components/FileUploader.vue](file://src/components/FileUploader.vue#L1-L50)
- [src/components/InvoiceTable.vue](file://src/components/InvoiceTable.vue#L1-L182)

## 系统架构图

```mermaid
graph TD
A[用户界面] --> B[文件上传组件]
A --> C[数据表格组件]
A --> D[操作栏组件]
B --> E[文件验证]
E --> F{文件格式?}
F --> |PDF| G[PDF解析器]
F --> |XML| H[XML解析器]
G --> I[发票数据提取]
H --> I
I --> J[状态管理 (Pinia)]
J --> C
J --> K[文件名生成器]
K --> L[文件导出 (ZIP)]
C --> M[用户编辑]
M --> J
D --> L
```

**Diagram sources**
- [src/components/FileUploader.vue](file://src/components/FileUploader.vue#L1-L50)
- [src/components/InvoiceTable.vue](file://src/components/InvoiceTable.vue#L1-L182)
- [src/composables/useFileParser.ts](file://src/composables/useFileParser.ts#L1-L109)
- [src/stores/invoice.ts](file://src/stores/invoice.ts#L1-L256)
- [src/utils/nameGenerator.ts](file://src/utils/nameGenerator.ts#L1-L250)
- [src/composables/useFileExport.ts](file://src/composables/useFileExport.ts#L1-L94)